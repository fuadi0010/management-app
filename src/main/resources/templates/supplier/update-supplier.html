<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Update Supplier</title>
  <link rel="stylesheet" href="/css/supplier.css" />
</head>
<body>

<header>
  <h1>Update Supplier</h1>
</header>

<main class="container">
  <section class="main-container">
    <div class="form-container">
      <h2>Form Update Supplier</h2>

      <!-- Update Info -->
      <div class="update-info">
        <p><strong>Note:</strong> You are updating supplier information.</p>
        <p>
          Supplier name cannot be changed. Only telephone number and address
          can be updated.
        </p>
      </div>

      <!-- Error Messages -->
      <div th:if="${param.error}" class="error-message">
        <strong>Error:</strong>
        <span th:text="${param.error}"></span>
      </div>

      <!-- âœ… SINGLE FORM ONLY -->
      <form
        th:action="@{/supplier/edit-supplier}"
        th:object="${supplier}"
        method="post"
      >

        <!-- role (optional, backward compatible) -->
        <input type="hidden" name="role" th:value="${userRole}" />

        <!-- supplier id -->
        <input type="hidden" th:field="*{id}" />

        <!-- Supplier Name (Read-only) -->
        <div class="form-group">
          <label for="supplierName">Supplier Name *</label>
          <input
            type="text"
            id="supplierName"
            th:field="*{supplierName}"
            class="readonly-field"
            readonly
          />
        </div>

        <!-- Telephone Number -->
        <div class="form-group">
          <label for="telephoneNumber">Telephone Number *</label>
          <input
            type="tel"
            id="telephoneNumber"
            th:field="*{telephoneNumber}"
            placeholder="+62 812 3456 7890"
            required
          />
          <div
            class="error"
            th:if="${#fields.hasErrors('telephoneNumber')}"
            th:errors="*{telephoneNumber}"
          ></div>
        </div>

        <!-- Address -->
        <div class="form-group">
          <label for="address">Address *</label>
          <input
            type="text"
            id="address"
            th:field="*{address}"
            placeholder="Enter complete address"
            required
          />
          <div
            class="error"
            th:if="${#fields.hasErrors('address')}"
            th:errors="*{address}"
          ></div>
        </div>

        <!-- Buttons -->
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">
            Update Supplier
          </button>

          <a
            th:href="@{/supplier/list(role=${userRole})}"
            class="btn btn-secondary"
          >
            Batal
          </a>
        </div>

      </form>
    </div>
  </section>
</main>

<script src="/js/supplier.js"></script>
</body>
</html>
